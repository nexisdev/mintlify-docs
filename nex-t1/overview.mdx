---
title: 'Nex‑T1 Overview'
description: 'What Nex‑T1 is, what it can do, when to use it, and the tech behind it.'
icon: 'sparkles'
---

# Overview

<Info>
Nex‑T1 is a production‑grade AI agent platform for Web3 that unifies research, trading, and on‑chain execution behind one reliable API. It solves fragmented multi‑tool workflows by consolidating data sources (The Graph, Dune, DeFiLlama), market infrastructure (Chainlink, Binance), and execution adapters (Uniswap/0x, Thirdweb) with built‑in risk checks and guardrails. Power users, DeFi teams, and crypto traders get multi‑agent orchestration, MCP integrations across EVM/Solana/Bitcoin, and preview‑to‑execute flows to move from insight to action safely and fast.
</Info>

<CardGroup cols={3}>
  <Card title="What It Is" icon="sparkles">
    A FastAPI + LangGraph service that exposes chat, research, quoting, execution, and risk‑check APIs with built‑in auth, metrics, and tracing.
  </Card>
  <Card title="What It Does" icon="zap">
    Routes intents, calls tools and MCP servers, retrieves market/research data, generates LLM responses, and (optionally) executes on EVM via wallet adapters.
  </Card>
  <Card title="Who It’s For" icon="users">
    Users needing reliable APIs for AI workflows; developers extending tools, teams, and adapters for domain‑specific agents.
  </Card>
</CardGroup>

---

## Introduction

Nex‑T1 provides:

- A robust FastAPI service with Prometheus metrics, health checks, and Langfuse tracing.
- A LangGraph agent that binds tools, manages state, and retries LLM calls with environment‑aware settings.
- JWT authentication and session tokens for secure access to chat and multi‑agent endpoints.
- Feature‑flagged multi‑agent previews for intent routing, quoting, execution, research, and risk evaluation.
- MCP integrations and safe direct HTTP fallbacks for reliability during development.

Key modules:

- `app/main.py` — App wiring, metrics, CORS, health.
- `app/api/v1/api.py` — Mounts `auth`, `chatbot`, `multi-agent` routers.
- `app/core/langgraph/graph.py` — Agent graph, Postgres checkpointing, tool calling.
- `app/api/v1/multiagent.py` — Research, quote/execute, risk preview endpoints.
- `app/core/langgraph/tools` — Built‑in + MCP adapter tools.

---

## Use Cases

- Research assistants
  - Run subgraph queries (The Graph), Dune jobs/results, DeFiLlama TVL/prices, and sentiment lookups in a single request.
  - Endpoint: `/api/v1/multi-agent/research/preview`.

- Trading previews (EVM/Solana)
  - Fetch quotes and simulate trades using Uniswap/0x and Jupiter adapters; execute via Thirdweb/EVM Wallet MCP.
  - Endpoints: `/api/v1/multi-agent/preview`, `/api/v1/multi-agent/quote/evm/pseudo` (dev only), `/api/v1/multi-agent/execute/evm`.

- Risk evaluation
  - Compute configurable risk thresholds (e.g., allowed tokens, expected price vs Chainlink reference) before execution.
  - Endpoint: `/api/v1/multi-agent/risk/preview`.

- Exchange market data
  - Subscribe to Binance spot data via MCP, list/invoke tools; unsubscribe when done.
  - Endpoints: `/api/v1/multi-agent/binance/*`.

- General chat
  - Single‑agent chat with a default DuckDuckGo search tool bound; extendable with more tools.
  - Endpoints: `/api/v1/chatbot/chat`, `/api/v1/chatbot/chat/stream`.

Developer extensions
- Add new tools in `app/core/langgraph/tools` and bind to the agent.
- Add/replace MCP adapters in `app/core/langgraph/tools/mcp` and `app/core/integrations/mcp`.
- Expand multi‑agent teams in `app/core/langgraph/multi/teams/*`.

<CardGroup cols={3}>
  <Card title="Research" icon="book-open" href="#use-cases">Combine Graph, Dune, and DeFiLlama data in one call.</Card>
  <Card title="Trade Preview" icon="activity" href="#use-cases">Quote, risk‑check, then execute with wallet adapters.</Card>
  <Card title="Operations" icon="server" href="#integration-guide">Metrics, health, and tracing for production ops.</Card>
</CardGroup>

---

## Get Started

<Steps>
  <Step title="Prerequisites">
    - Python 3.13+
    - PostgreSQL (local or managed)
    - Docker & Docker Compose (optional)
  </Step>
  <Step title="Install dependencies">
    Uses `uv` and a `pyproject.toml`.
    <CodeGroup>
      ```bash
      uv sync
      ```
    </CodeGroup>
  </Step>
  <Step title="Configure environment">
    Environment files: `.env.development`, `.env.staging`, `.env.production`.
    Critical vars: `LLM_API_KEY`, `POSTGRES_*`, `JWT_SECRET_KEY`, optional MCP bases.
  </Step>
  <Step title="Run the API">
    <CodeGroup>
      ```bash Local
      make dev          # or: uvicorn app.main:app --host 0.0.0.0 --port 8000
      ```
      ```bash Docker
      make docker-build-env ENV=development
      make docker-run-env   ENV=development
      ```
    </CodeGroup>
    Swagger: `http://localhost:8000/docs`, Metrics: `/metrics`, Health: `/health`.
  </Step>
</Steps>

---

## Features

- FastAPI backend with async performance, CORS, security headers, and validation handlers.
- Prometheus metrics and Grafana dashboards; health endpoints.
- LangGraph agent with OpenAI chat model binding and Postgres checkpointer (`AsyncPostgresSaver`).
- Langfuse tracing for LLM/tool observability.
- JWT authentication, user + session tokens.
- Multi‑agent preview router for intent routing, quotes/execute, research, and risk.
- MCP adapters and direct HTTP fallbacks (The Graph, Dune, CoinGecko, DeFiLlama, Chainlink, Uniswap/0x, Thirdweb Wallet, Binance, Jupiter, Bitcoin).
- Config via `.env.*` and dynamic environment detection (`development`, `staging`, `production`, `test`).

Developer ergonomics
- Clear module boundaries: `api`, `core`, `models`, `schemas`, `services`, `utils`.
- Typed Pydantic models for requests and responses.
- Feature flags in `app/core/feature_flags.py` (e.g., `MULTI_AGENT_ENABLED`).
- Makefile targets for common workflows; Docker Compose for full stack.

---

## Usage

Authentication and session flow:

<CodeGroup>
```bash Register
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H 'Content-Type: application/json' \
  -d '{"email":"you@example.com","password":"StrongP@ssw0rd"}'
```
```bash Login
curl -X POST http://localhost:8000/api/v1/auth/login -F username=you@example.com -F password=StrongP@ssw0rd
```
```bash Create Session
curl -X POST http://localhost:8000/api/v1/auth/session \
  -H 'Authorization: Bearer <user_access_token>'
```
</CodeGroup>

Chat endpoints (single‑agent):

<CodeGroup>
```bash Chat
curl -X POST http://localhost:8000/api/v1/chatbot/chat \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"messages":[{"role":"user","content":"hello"}]}'
```
```bash Stream
curl -X POST http://localhost:8000/api/v1/chatbot/chat/stream \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -N -d '{"messages":[{"role":"user","content":"hello"}]}'
```
</CodeGroup>

Multi‑agent preview (feature‑flagged via `MULTI_AGENT_ENABLED=true`):

<CodeGroup>
```bash Intent
curl -X POST http://localhost:8000/api/v1/multi-agent/preview \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"text":"quote 10 USDC to WETH on Base"}'
```
```bash Research
curl -X POST http://localhost:8000/api/v1/multi-agent/research/preview \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"subgraph":"https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3","gql":"query{ bundles(first:1){ethPrice} }"}'
```
</CodeGroup>

---

## Tools

- Built‑in: DuckDuckGo search tool bound to the main chat agent (`app/core/langgraph/tools`).
- Built‑in location: `app/core/langgraph/tools/duckduckgo_search.py`; register in `app/core/langgraph/tools/__init__.py` (edit the `tools` list).
- MCP Adapters (select examples):
  - Research: The Graph, Dune, CoinGecko, DeFiLlama, Sentiment.
  - EVM: Chainlink price feeds, Uniswap quote/execute (via 0x APIs), Thirdweb wallet (balance, sign/send, get tx).
  - Exchanges: Binance subscribe/unsubscribe (typed helper wrappers).
  - Solana: Jupiter quote/execute (HTTP fallback), Helius (verification adapter in docs).
  - Bitcoin: MCP adapter with runtime tool discovery.

Note: By default, only DuckDuckGo is bound to the single‑agent chat toolset. MCP adapters are exercised via the `multi-agent` endpoints and can be bound as tools if desired.

## Add a New Tool

1) Create a `BaseTool` subclass in `app/core/langgraph/tools/`.
2) Export it from `app/core/langgraph/tools/__init__.py` and add to the `tools` list.
3) Optionally expose a dedicated endpoint that uses the tool for easier user access.

---

## MCP

MCP servers are integrated via lightweight adapters in `app/core/integrations/mcp` and `app/core/langgraph/tools/mcp`. Configure base URLs and tokens via environment variables. From the repository’s README:

```env
# Thirdweb MCP (execute)
THIRDWEB_MCP_BASE=https://thirdweb-mcp.example.com
THIRDWEB_MCP_TOKEN=<token>

# Optional MCP server bases
CHAINLINK_MCP_BASE=https://chainlink.nex-t1.ai
DEFILLAMA_MCP_BASE=https://defillama.nex-t1.ai
EVM_WALLET_MCP_BASE=https://evm-wallets.nex-t1.ai
ETHERSCAN_MCP_BASE=https://etherscan.nex-t1.ai
HELIUS_MCP_BASE=https://helius.nex-t1.ai
BLOCKNATIVE_MCP_BASE=https://blocknative.nex-t1.ai
UNISWAP_SPY_MCP_BASE=https://uniswap-spy.nex-t1.ai
SENTIMENT_MCP_BASE=https://sentiment.nex-t1.ai
ALCHEMY_MCP_BASE=https://alchemy.nex-t1.ai
BINANCE_MCP_BASE=https://binance.nex-t1.ai
BITCOIN_MCP_BASE=https://bitcoin.nex-t1.ai
```

Direct HTTP fallbacks exist for certain tools (e.g., The Graph, Dune, Jupiter) when MCP bases are not configured.

### Example: DeFiLlama

List tools and invoke via REST endpoints backed by MCP adapters:

<CodeGroup>
```bash List Tools
curl -H 'Authorization: Bearer <session_token>' \
  http://localhost:8000/api/v1/multi-agent/defillama/tools
```
```bash Invoke
curl -X POST http://localhost:8000/api/v1/multi-agent/defillama/invoke \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"tool_name":"tvl_get","arguments":{"chain":"ethereum"}}'
```
</CodeGroup>

### Example: Thirdweb Wallet MCP

- Balance: `evm.thirdweb_get_balance`
- Sign + send: `evm.thirdweb_sign_and_send`
- Get tx: `evm.thirdweb_get_tx`

See `app/core/langgraph/tools/mcp/evm_thirdweb.py` for argument schemas and internal HTTP helpers.

### Example: Binance MCP

- Runtime tool discovery, subscribe/unsubscribe helpers with typed endpoints:

<CodeGroup>
```bash Subscribe
curl -X POST http://localhost:8000/api/v1/multi-agent/binance/subscribe \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"symbol":"BTCUSDT","market":"spot","streams":["trade"],"interval":"1m"}'
```
```bash Unsubscribe
curl -X POST http://localhost:8000/api/v1/multi-agent/binance/unsubscribe \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"subscription_id":"sub-123"}'
```
</CodeGroup>

<Warning>
Gate live‑market integrations behind feature flags and strict rate limits in production. Validate inputs and sanitize symbols to prevent abuse.
</Warning>

---

## Supported Chains

- EVM (chain IDs; Base 8453 used in examples). EVM RPC provided via `EVM_RPC_URL` or `EVM_RPC_URL_<CHAIN_ID>`.
- Solana via Jupiter quote/execute adapters.
- Bitcoin via dedicated MCP adapter.

Token metadata and decimals for EVM quoting are read from `configs/evm_tokens.json`; token allowlists and Chainlink feed mappings are supported via `configs/token_allowlist.json` and `configs/chainlink_feeds.json`.

Adapters
- Chainlink price: `evm_chainlink.py`
- Uniswap/0x quote/execute: `evm_uniswap.py`
- Wallet (Thirdweb or EVM Wallet MCP): `evm_thirdweb.py` and `integrations/mcp/evm_wallet.py`

---

## Supported Protocols

We prioritize widely adopted, high‑TVL, security‑audited protocols that are central to user workflows. See full selection rationale and integration criteria in [/nex-t1/supported-protocols#integration-criteria](/nex-t1/supported-protocols#integration-criteria). The cards render in 2 columns per row.

<CardGroup cols={2}>
  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/1inch.svg" alt="1inch" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>1inch</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>DEX aggregation for best execution</li>
      <li>Pathfinding and gas optimization</li>
      <li>Limit orders and RFQ</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/ENS.svg" alt="ENS" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>ENS (Ethereum Name Service)</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Ethereum</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>.eth human‑readable names</li>
      <li>Reverse resolution</li>
      <li>DNS‑style records and subdomains</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/aave.svg" alt="Aave" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Aave</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Lending/borrowing markets</li>
      <li>Stable/variable rates</li>
      <li>Flash loans and aTokens</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/alchemy.svg" alt="Alchemy" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Alchemy</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM (multi‑chain)</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Managed RPC and WebSocket nodes</li>
      <li>Enhanced APIs (NFT, Transfers)</li>
      <li>Monitoring and analytics</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/chainlink.svg" alt="Chainlink" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Chainlink</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM (multi‑chain)</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Decentralized data feeds</li>
      <li>VRF and Automation</li>
      <li>Cross‑chain messaging (CCIP)</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/coinbase-wallet.svg" alt="Coinbase Wallet" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Coinbase Wallet</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Self‑custody wallet</li>
      <li>dApp browser + WalletConnect</li>
      <li>Multi‑chain asset management</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/curve.svg" alt="Curve" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Curve</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>AMM optimized for stable/swappable assets</li>
      <li>Low slippage, deep liquidity</li>
      <li>Pool gauges and incentives</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/debank.svg" alt="DeBank" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>DeBank</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Multi‑chain</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>DeFi portfolio tracking</li>
      <li>Token approvals insights</li>
      <li>Multi‑chain wallet analytics</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/defillama.svg" alt="DeFiLlama" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>DeFiLlama</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Multi‑chain</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Protocol and chain TVL data</li>
      <li>Yield and price aggregations</li>
      <li>Ecosystem analytics</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/dune.svg" alt="Dune" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Dune</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Multi‑chain</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>On‑chain analytics via SQL</li>
      <li>Dashboards and datasets</li>
      <li>API access to query results</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/etherscan.svg" alt="Etherscan" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Etherscan</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Ethereum</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Ethereum block explorer</li>
      <li>Contract verification and ABIs</li>
      <li>APIs for tx/logs</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/hardhat.svg" alt="Hardhat" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Hardhat</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM (dev/test)</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Developer tooling and task runner</li>
      <li>Network forking and testing</li>
      <li>Rich plugin ecosystem</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/infura.svg" alt="Infura" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Infura</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM (multi‑chain)</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Scalable RPC endpoints</li>
      <li>WebSocket + archival access</li>
      <li>IPFS and multi‑chain support</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/metamask.svg" alt="MetaMask" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>MetaMask</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Browser/mobile crypto wallet</li>
      <li>dApp connection and signatures</li>
      <li>Multiple networks support</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/opensea.svg" alt="OpenSea" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>OpenSea</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: Multi‑chain (NFT)</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>NFT marketplace</li>
      <li>Listings, bids, and offers</li>
      <li>Collection metadata and APIs</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/uniswap.svg" alt="Uniswap" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Uniswap</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>AMM DEX (V2/V3)</li>
      <li>Concentrated liquidity and pools</li>
      <li>On‑chain swaps and quotes</li>
    </ul>
  </Card>

  <Card>
    <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
      <img src="/images/protocols/yearn.svg" alt="Yearn" width="42" height="42" />
      <div>
        <div style={{ fontWeight: 600 }}>Yearn</div>
        <div style={{ fontSize: '0.9em', opacity: 0.8 }}>Chains: EVM</div>
      </div>
    </div>
    <ul style={{ marginTop: '10px', fontSize: '11px' }}>
      <li>Yield‑aggregating vaults</li>
      <li>Automated strategies</li>
      <li>DeFi composability</li>
    </ul>
  </Card>
</CardGroup>

---

## Prompting Guide

System prompt lives in `app/core/prompts.py` and the chat flow binds tools via `LangGraphAgent` (`app/core/langgraph/graph.py`). Practical tips:

- Be explicit about intent, chain, and tokens: “quote 10 USDC to WETH on Base”.
- For research, specify data sources and limits: “get TVL by chain (ethereum) and top 5 pools”.
- For execution, include wallet context when required by adapters (e.g., Thirdweb wallet reference).

Tips
- Be explicit about intent and chain context. Example: “quote 10 USDC to WETH on Base (8453)”.
- For research, specify sources and limits. Example: “Graph query: top 5 pools by TVL; Dune query 12345 with params …”.
- For execution, include wallet context when adapters require it. Example: “use Thirdweb wallet_ref=…; chain_id=8453”.
- Keep long‑running operations staged: preview intent → preview quote → risk → execute.

Example Prompts
- Research: “Get ETH price from Chainlink (Base), TVL for ethereum from DeFiLlama, and latest 10 trending words in sentiment.”
- Trade preview: “Quote 0.01 ETH to USDC on Base; include Chainlink reference; compute risk report.”
- Data check: “Run The Graph query for Uniswap V3 pools(first:2) id + TVL.”

---

## Integration Guide

1) Auth and Session

- Register/login to obtain a user token, then create a session for an access token used across chat/multi‑agent routes.

2) Call APIs

- Single‑agent chat: `/api/v1/chatbot/chat` or `/chat/stream`.
- Multi‑agent previews: `/api/v1/multi-agent/*` (intent, research, quote/execute, risk checks).

3) Configure Adapters

- Provide `LLM_API_KEY`, Postgres settings, and MCP base URLs/tokens as needed.
- Optional: populate `configs/*.json` for tokens, Chainlink feeds, and allowlists.

Monitoring & Health

- Metrics at `/metrics`, health at `/health` and `/api/v1/health`, and Langfuse tracing via env keys.

Security & reliability
- Rate limits apply; handle HTTP 429 with backoff.
- Validate responses and timeouts; endpoints return structured JSON per Pydantic schemas.

---

## Example Usage

EVM pseudo quote + risk preview (dev‑only pseudo quote):

<CodeGroup>
```bash Pseudo Quote (EVM)
curl -X POST http://localhost:8000/api/v1/multi-agent/quote/evm/pseudo \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"input":{"chain_id":8453,"token_in_address":"0x4200000000000000000000000000000000000006","token_out_address":"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913","amount_in":"0.01","amount_in_currency":"ETH"}}'
```
```bash Risk Preview
curl -X POST http://localhost:8000/api/v1/multi-agent/risk/preview \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"quote":{...},"input":{"chain":"base"}}'
```
</CodeGroup>

Research (Graph + Dune + DeFiLlama helpers): see README examples for `research/preview` and `defillama` tool invocations.

### Research: The Graph + Dune + DeFiLlama

<CodeGroup>
```bash Research
curl -X POST http://localhost:8000/api/v1/multi-agent/research/preview \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{
    "subgraph": "https://api.thegraph.com/subgraphs/name/uniswap/uniswap-v3",
    "gql": "query($first:Int!){ pools(first:$first){ id totalValueLockedUSD } }",
    "variables": { "first": 2 },
    "dune_query_id": 12345,
    "dune_params": {"example":"value"},
    "defi_calls": [
      {"tool_name":"tvl_get","arguments":{"chain":"ethereum"}},
      {"tool_name":"token_price","arguments":{"token":"ethereum"}}
    ]
  }'
```
</CodeGroup>

### Binance Subscribe/Unsubscribe

<CodeGroup>
```bash Subscribe
curl -X POST http://localhost:8000/api/v1/multi-agent/binance/subscribe \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"symbol":"BTCUSDT","market":"spot","streams":["trade"],"interval":"1m"}'
```
```bash Unsubscribe
curl -X POST http://localhost:8000/api/v1/multi-agent/binance/unsubscribe \
  -H 'Authorization: Bearer <session_token>' -H 'Content-Type: application/json' \
  -d '{"subscription_id":"sub-123"}'
```
</CodeGroup>

---

## Disclaimers/Legal

- Certain endpoints are development or preview‑only (e.g., `/quote/evm/pseudo`). Guard with feature flags before production (see `docs/PSEUDO_TO_PRODUCTION.md`).
- MCP integrations require third‑party services; configure credentials and follow provider terms.
- On‑chain execution and wallet operations should be tested in safe environments; verify receipts and add idempotency.
- This documentation reflects the code as provided; adapt configurations, rate limits, and security settings to your deployment.
